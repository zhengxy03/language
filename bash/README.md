# command
## wget
* -N 是wget的一个选项，意味着“如果服务器上的文件比本地文件新，则下载该文件”。这确保了您总是拥有最新版本的文件。

## cut
cut 是一个文本处理工具，用于从输入行中提取字段(列）。
* -f N 提取第N个字段
## split
split 是一个用于将输入分割成多个文件的工具。
* -l N 指定每个输出文件包含的最大行数
* -a N 指定生成的文件名长度为N个字符
* -d 表示使用数字作为后缀
* - 表示输入来自标准输入
* -b 值为输出大小，单位是byte
## sed 
流编辑器，是一个命令行文本处理工具，对输入流（通常是文件内容）进行处理和转换。
    * d 是一个命令，表示删除, 1d是删除第一行。
## find
命令用于在文件系统中搜索文件。
* -maxdepth N 限制搜索深度为当前目录下N级
* -type f 指定只查找文件
* -name 匹配文件名
## parallel
* -j 同时运行
* --line-butter 确保输出即时刷新，而不是等到命令完成。
* -k 表示保持输入顺序。
## perl
* -e 执行后续字符串
* -n 逐行读取输入文件
* -p “processing”模式，它使得Perl脚本在读取输入的同时进行处理，并打印修改后的结果。
* - 表示 Perl 从标准输入读取脚本。
* -v 选项启用详细模式，显示版本信息。
* -l 使得 Perl 自动为每个输入行添加换行符。
* -a 使得 Perl 将输入行自动分割到 @F 数组中。
* -F 是一个 Perl 命令行开关，用于设置输入字段的分隔符（field separator），如-F"\t"
  当使用 -F"\t" 时，Perl 会将输入的每行文本按照制表符进行分割，并将分割后的部分存储在默认的数组 @F 中。这样，您可以通过 $F[0]、$F[1] 等访问每一列的值。
## rsync 
* -a：归档模式，等同于 -rlptgoD，保留了几乎所有的文件属性，并递归地同步目录。
* -v：详细模式，显示更多的信息，包括同步过程中的详细信息。
* -P：显示进度信息，等同于 --partial --progress。
## xargs
将前一个命令的输出作为参数传递给后一个命令
    * -I[]： 是 xargs 的一个选项，它指定了一个替换字符串 []，用于在由 xargs 执行的命令中替换输入项。每个输入项将替换掉 []，然后执行后面的命令。
## 重定向符
* \> 这个操作符用于将数据写入文件，如果文件已存在，则会截断文件（即删除文件中原有的所有内容），然后写入新数据。
* \>> 这个操作符用于将数据追加到文件的末尾，如果文件已存在。如果文件不存在，它的行为与 > 相同，即创建一个新文件并写入数据。
* \>&2 将标准输出（stdout）重定向到标准错误流（stderr）。
* 2>/dev/null 将标准错误流（stderr）重定向到 /dev/null，这是一个特殊的设备文件，它会丢弃所有写入其中的数据（即不保留任何输出）。
# pkgs&tools
## 2.1 tsv-utils
tsv 包是一组用于处理 Tab-Separated Values (TSV) 文件的命令行工具集。这些工具可以帮助用户轻松地读取、写入、过滤、排序和处理 TSV 数据。TSV 文件是一种常见的数据交换格式，其中数据列由制表符分隔，类似于 CSV 文件，但使用制表符而不是逗号。
* tsv-filter：根据指定的条件过滤 TSV 文件中的行。
    * --le 是 tsv-filter 的一个选项，用于根据指定的列和条件过滤行,表示小于等于。
    * --gt 表示“大于”（greater than）。如--gt 2:2000
    * --ff-str-ne 是一个参数，用于指定字段（field）过滤条件。ne 代表“not equal”，即不等于。
* tsv-select: 从制表符分隔值（TSV）文件中选择特定的列。
    * -f 1-3：这是 tsv-select 命令的参数，-f 表示“fields”，即字段或列。
## 2.2 mash(MinHash)
MinHash 是一种用于估计两个集合相似度的算法，它基于局部敏感哈希（Locality-Sensitive Hashing, LSH）的概念。MinHash 的核心思想是通过哈希函数将集合中的元素映射到一个较小的“签名”空间，使得相似集合的签名具有更高的概率相似。MinHash 算法主要用于估计集合之间的Jaccard相似系数，即两个集合交集大小与并集大小之比。<br>
Mash扩展了MinHash技术，使其能够用于评估基因组之间的距离，包括成对的突变距离和P值显著性测试，从而实现大规模序列集合的高效聚类和搜索。
> `构建MinHash草图`（Sketching）：<br>
Mash首先将大型基因组序列简化为较小的代表性草图（sketches）。这是通过将基因组序列分解为固定长度的k-mer（短片段），然后将每个k-mer通过哈希函数转换成哈希值来实现的。这样，基因组序列的相似度问题就转化为了这些哈希值集合的相似度问题<br>
> `估计Jaccard指数`：<br>
MinHash技术允许对两个k-mer集合的Jaccard指数进行近似估计。Jaccard指数是衡量两个集合相似度的指标，即两个集合交集的大小除以并集的大小。Mash通过合并排序两个底部草图来估计Jaccard指数，这个估计是一个无偏估计，并且误差界限只依赖于草图的大小，与基因组的大小无关<br>
> `计算Mash距离`：<br>
Mash距离是基于MinHash草图直接估计两个序列之间的突变率的新距离度量。这个距离度量与基于对齐的距离度量（如平均核苷酸一致性，ANI）有很强的相关性，但是计算速度更快，因为它仅依赖于比较缩小尺寸的草图<br>
> `实际应用案例`：<br>
Mash可以用于对NCBI RefSeq中的所有基因组进行聚类，基于组装或未组装的实时基因组聚类，以及聚类大量的宏基因组数据集.<br>
用户可以下载RefSeq参考基因组的数据库sketch文件，然后对自己的样本数据（如测序 reads）进行sketch，最后使用Mash的dist命令比较样本数据与参考基因组之间的距离

* sketch: mash的子命令，用于创建一个sketch。这个sketch可以用于快速比较基因组序列的相似性。
    * -k 这个参数指定了sketch中使用的k-mer的长度
    * -s 这个参数指定了sketch的大小，即每个k-mer在sketch中出现的次数。
    * -i 这个参数指示MASH在读取输入时忽略质量分数
    * -p 这个参数指定了使用多个处理器来并行执行sketch的创建。
    * \-  这个符号表示MASH将从标准输入读取数据。
    * -o 这个参数指定了输出文件的名称
* dist: 用于计算两个或多个 MinHash 草图之间的距离。